@HEADER-COMMENT@

@HEADER@
Group:		System/YaST
License:	GPL-2.0
BuildRequires:	gcc-c++ libtool sablot swig
BuildRequires:	docbook-xsl-stylesheets doxygen libxslt perl-XML-Writer sgml-skel update-desktop-files
BuildRequires:	libstorage-devel >= 2.24.0 yast2 >= 2.19.4 yast2-core-devel >= 2.23.1 yast2-devtools
BuildRequires:	yast2-testsuite >= 2.19.0 yast2-perl-bindings
BuildRequires:	rubygem-ruby-dbus
Requires:	libstorage4 >= 2.24.0
Requires:	yast2-perl-bindings perl = %{perl_version}
Requires:	yast2-core >= 2.18.3 yast2 >= 2.19.4 yast2-libyui >= 2.18.7
Requires:	rubygem-ruby-dbus
%ifarch s390 s390x
Requires:	yast2-s390
%endif
PreReq:		%fillup_prereq
Provides:	y2a_fdsk yast2-config-disk
Obsoletes:	y2a_fdsk yast2-config-disk
Provides:	yast2-agent-fdisk yast2-agent-fdisk-devel
Obsoletes:	yast2-agent-fdisk yast2-agent-fdisk-devel
Provides:	yast2-trans-inst-partitioning
Obsoletes:	yast2-trans-inst-partitioning
Provides:	y2t_inst-partitioning
Obsoletes:	y2t_inst-partitioning
Requires:       yast2-ruby-bindings >= 1.0.0

Summary:	YaST2 - Storage Configuration

%description
This package contains the files for YaST2 that handle access to disk
devices during installation and on an installed system.

@PREP@

@BUILD@

@INSTALL@
rm -f $RPM_BUILD_ROOT/@plugindir@/libpy2StorageCallbacks.la
rm -f $RPM_BUILD_ROOT/@plugindir@/libpy2StorageCallbacks.so

@CLEAN@

%post
%{fillup_only -an storage}

%files
%defattr(-,root,root)

# storage
%dir @yncludedir@/partitioning
@yncludedir@/partitioning/*.rb
@clientdir@/inst_custom_part.rb
@clientdir@/inst_resize_ui.rb
@clientdir@/inst_resize_dialog.rb
@clientdir@/inst_disk.rb
@clientdir@/inst_target_part.rb
@clientdir@/inst_disk_proposal.rb
@clientdir@/inst_target_selection.rb
@clientdir@/inst_prepdisk.rb
@clientdir@/storage_finish.rb
@clientdir@/partitions_proposal.rb
@clientdir@/storage.rb
@clientdir@/disk.rb
@clientdir@/disk_worker.rb
@clientdir@/multipath-simple.rb
@moduledir@/*
@fillupdir@/sysconfig.storage-yast2-storage

%dir @ydatadir@
@ydatadir@/*.ycp

%doc %dir @docdir@
%doc @docdir@/README*
%doc @docdir@/COPY*

# agents-scr
@scrconfdir@/*.scr

# libstorage ycp callbacks
@plugindir@/libpy2StorageCallbacks.so.*

# disk
%dir @desktopdir@
@desktopdir@/disk.desktop

# scripts
@ybindir@/check.boot

# perl bindings of libstorage
%{perl_vendorarch}/LibStorage.so

%package devel
Requires:	libstorage-devel = %(echo `rpm -q --queryformat '%{VERSION}' libstorage-devel`)
Requires:       libstdc++-devel yast2-storage = %version

Summary:        YaST2 - Storage Library Headers and Documentation
Group:          Development/Libraries/YaST

%description devel
This package contains the files for YaST2 that are needed of one wants
to develop a program using libstorage.

%files devel
%defattr(-,root,root)
%doc @docdir@/autodocs
%doc @docdir@/config.xml.description
